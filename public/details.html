<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Experiment details</title>
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<link href="css/jumbotron-narrow.css" rel="stylesheet">

		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="//www.parsecdn.com/js/parse-1.6.0.min.js"></script>
		<script>
			Parse.initialize("7p9hrd9VKFWIjdQH9jwEEK4jO1CBlRaJxWryHIup", "vcyz6fmQNjpiTebwnNbJoYiWJDN3tF9lweKakdee");
			
			var currentUser = Parse.User.current();
			if (!currentUser) {
				window.location.replace('index.html');
			}
			
			var experimentId = location.search.split('id=')[1];
			var Experiment = Parse.Object.extend("Experiment");
			var query = new Parse.Query(Experiment);
			query.get(experimentId, {
				success: function(experiment) {
					var containerHtml = "";
					if (experiment.get("name") != "") {
						containerHtml += "<h2>Name</h2>" + 
										 "<p>" + experiment.get("name") + "</p><br>";
					}
					if (experiment.get("title") != "") {
						containerHtml += "<h2>Title</h2>" + 
										 "<p>" + experiment.get("title") + "</p><br>";
					}
					if (experiment.get("date") != "") {
						containerHtml += "<h2>Date</h2>" + 
										 "<p>" + experiment.get("date") + "</p><br>";
					}
					if (experiment.get("time") != "") {
						containerHtml += "<h2>Time</h2>" + 
										 "<p>" + experiment.get("time") + "</p><br>";
					}
					if (experiment.get("location") != "") {
						containerHtml += "<h2>Location</h2>" + 
										 "<p>" + experiment.get("location") + "</p><br>";
					}
					if (experiment.get("conditions") != "") {
						containerHtml += "<h2>Conditions</h2>" + 
										 "<p>" + experiment.get("conditions") + "</p>";
						if (experiment.get("conditionsPhoto") != null) {
							containerHtml += "<img src='" + 
											 experiment.get("conditionsPhoto").url() +
											 "'/>";
						}
						containerHtml += "<br>";
					}
					if (experiment.get("equipment") != "") {
						containerHtml += "<h2>Equipment</h2>" + 
										 "<p>" + experiment.get("equipment") + "</p><br>";
					}
					if (experiment.get("action") != "") {
						containerHtml += "<h2>Action</h2>" + 
										 "<p>" + experiment.get("action") + "</p><br>";
					}
					if (experiment.get("outcome") != "") {
						containerHtml += "<h2>Outcome</h2>" + 
										 "<p>" + experiment.get("outcome") + "</p><br>";
					}
					if (experiment.get("whatHappened") != "") {
						containerHtml += "<h2>What happened</h2>" + 
										 "<p>" + experiment.get("whatHappened") + "</p><br>";
					}
					if (experiment.get("whyDidHappen") != "") {
						containerHtml += "<h2>Why did it happen</h2>" + 
										 "<p>" + experiment.get("whyDidHappen") + "</p><br>";
					}
					if (experiment.get("howToUse") != "") {
						containerHtml += "<h2>How to use this info</h2>" + 
										 "<p>" + experiment.get("howToUse") + "</p><br>";
					}
					document.getElementById('container').innerHTML = containerHtml;
				},
				error: function(experiment, error) {
					alert("Experiment not found");
					window.location.replace('past.html');
				}
			});
		</script>
	</head>
  
	
	<body>
		<div class="container">
			<div class="jumbotron">
				<a href="#" onclick="logout();return false;" class="pull-right" style="font-family: monospace">Log out</a>
				<div id="container"></div>
			</div>
		</div>
		
		<script type="text/javascript">
			function logout() {
				Parse.User.logOut();
				window.location.replace('index.html');
			}
		</script>
	</body>

</html>

		